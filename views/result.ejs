<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="../stylesheets/style.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script type="text/javascript" src="./js/view.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.0.min.js" ></script>
    <script>
    window.onload = function() {
      var w = window.innerWidth;
      var h = window.innerHeight;
      var wper = <%= width %> / <%= height %> * 100;
      var hper = <%= height %> / <%= width %> * 100;
      if (w > h) {
        if (<%= width %> > <%= height %>) {
        document.getElementById( 'img' ).setAttribute( 'style', 'background-image: url(../<%= path %>); height: ' + hper + 'vh' ); 
        }
        else if (<%= width %> < <%= height %>) {
          document.getElementById( 'img' ).setAttribute( 'style', 'background-image: url(../<%= path %>); width: ' + wper + 'vh' );
        }
        else {
          document.getElementById( 'img' ).setAttribute( 'style', 'background-image: url(../<%= path %>); height: 100vh' );
        } 
      }
      else {
        document.getElementById( 'img' ).setAttribute( 'style', 'background-image: url(../<%= path %>); height: ' + hper + 'vw' ); 
      }
    }
    </script>
    <script>
      window.addEventListener("resize", myFunction);

      function myFunction() {
        var w = window.innerWidth;
        var h = window.innerHeight;
        var wper = <%= width %> / <%= height %> * 100;
        var hper = <%= height %> / <%= width %> * 100;
      if (w > h) {
        if (<%= width %> > <%= height %>) {
        document.getElementById( 'img' ).setAttribute( 'style', 'background-image: url(../<%= path %>); height: ' + hper + 'vh' ); 
        }
        else if (<%= width %> < <%= height %>) {
          document.getElementById( 'img' ).setAttribute( 'style', 'background-image: url(../<%= path %>); width: ' + wper + 'vh' );
        }
        else {
          document.getElementById( 'img' ).setAttribute( 'style', 'background-image: url(../<%= path %>); height: 100vh' );
        } 
      }
      else {
        document.getElementById( 'img' ).setAttribute( 'style', 'background-image: url(../<%= path %>); height: ' + hper + 'vw' ); 
      }
      }
    </script>
    <!--<script>
    var w = window.innerWidth;
    var h = window.innerHeight;
    if (h < w) {
      document.write('text');
      //$(".img")attr('style','background-image: url(../<%= path %>); height : 100vh');
      //document.getElementById( 'img' ).setAttribute( 'style', 'background-image: url(../<%= path %>); height: 100vh' ); 
    }
    </script>-->
    <title>SSU Menu</title>
  </head>
  <body>
    <main>
      <div class=wrap>
        <div id=img class="img" style="background-image: url(../<%= path %>)">
          <svg id=svg>
            <% for (var i = 1; i < position.length; i++) { %>
            <% 
              var rx =  position[i].boundingPoly[0].x /  width * 100
              var ry =  position[i].boundingPoly[0].y /  height * 100
              var rwidth = (position[i].boundingPoly[1].x - position[i].boundingPoly[0].x) / width * 100;
              var rheight = (position[i].boundingPoly[2].y - position[i].boundingPoly[0].y) / height * 100;
            %>
            <a href = "javascript:void(0)" onclick = "document.getElementById('light<%= i %>').style.display='block';document.getElementById('fade').style.display='block'">
              <rect id = "rect<%= i %>" x="<%= rx %>%" y="<%= ry %>%" width="<%= rwidth %>%" height="<%= rheight %>%"/>
              <text id = text x="<%= rx %>%" y="<%= ry %>%" dx="0.5%" dy="2%">
              <%= position[i].translation%>
              </text>
            </a>
            <% } %>
          </svg>
          <% for (var j = 1; j < position.length; j++) { %>
          <div id="light<%= j %>" class="white_content">
            <%= position[j].translation%>
          <div class="close">
          <a href = "javascript:void(0)" onclick = "document.getElementById('light<%= j %>').style.display='none';document.getElementById('fade').style.display='none'">
          <i class="fa fa-times" aria-hidden="true"></i>
          </a></div>
          </div>
          <% } %>
          <div id="fade" class="black_overlay"></div>
        </div>
      </div>
    </main>

    <footer>
      </div>
      <div class="top">
        <a href="#top"><i class="fa fa-arrow-up" aria-hidden="true"></i></a>
      </div>
    </footer>
  </body>
</html>
